function AMCustomScript(e,t,r,n,o,a){try{var i=document.getElementsByTagName("body")[0],c=i.querySelector(":scope > div:nth-of-type(1)"),l=c.id,d=c.querySelector(":scope .content-body"),s=(parseInt(getQuery("width",window.innerWidth)),parseInt(getQuery("height",window.innerHeight))/3),u=getQuery("platform","tablet");if(null!=getQuery("cache",null))return"mobile"!=u.trim()&&(i.className+=" completed",setTimeout(reloadStylesheets(),200)),void("function"==typeof o&&o(a));removeEmptyFigcaption(),removePhotoCreditEmpty(),addDoneDotToLastParagraph(d);c.getAttribute("layout");if(!c)return;if(c.className.indexOf("keep-first-image")<0&&removeFirstImage(d),c.className.indexOf("enable-dropcap")>=0&&createDropcap(d),"mobile"==u)return;var h=getHeightCoverSection(c);switch(d.style["padding-top"]=h+"px",l){case"reviews":setScrollForTable(d,s)}}catch(e){console.log(e)}}function chooseLayoutFunc(e,t,r,n,o){var a=document.querySelector(".cover .banner");document.querySelector(".cover .head-info");switch(e){case"hh_article-l":case"hh_secondary-l":case"news_article-l":case"news_secondary-l":case"rr_article-l":case"rr_secondary-l":addBannerWidthLandscape(t,r,n,a),initLandscape(t,r,n,3);break;case"hh_article_02-l":case"news_article_02-l":case"rr_article_02-l":addBannerWidthLandscape(t,r,n,a),initLandscape(t,r,n,2);break;case"hh_secondary_02-l":case"news_secondary_02-l":case"rr_secondary_02-l":addBannerWidthLandscape(t,r,n,a),initLandscape(t,r,n,4);break;case"hh_article_03-l":case"hh_secondary_03-l":case"news_article_03-l":case"news_secondary_03-l":case"rr_article_03-l":case"rr_secondary_03-l":initLandscape(t,r,n,1);break;default:console.log("Cannot find layout:",e)}}function addScrollIcon(e,t,r){var n=document.querySelectorAll(":scope .page .info");if(n.length>0)for(var o=0;o<n.length;o++)n[o].scrollHeight>n[o].clientHeight&&(n[o].className+=" scrollable-icon")}function addBannerWidthLandscape(e,t,r){createAttr("style","width:"+t+"px",document.querySelector(".cover .banner"))}function setHeightDefImage(e){var t=document.querySelector(":scope .head-info"),r=document.querySelector(":scope .default-image"),n=e-t.getBoundingClientRect().height-70;r.style.height=n+"px"}function initLandscape(e,t,r,n){var o,a=document.querySelector(".head-info"),i=document.querySelector(".cover .banner"),c=(document.querySelector(".header"),document.querySelector(".default-image"));getContentAreaPaddingTop();createAttr("style","width:"+t+"px",i),1===n&&createAttr("style","width:"+t+"px",a);var l,d=i.offsetHeight;if(1===n){o=a.offsetHeight+d,l=r-a.offsetHeight-d-getFooterHeight(),c.style.height=l+"px",c.style["margin-top"]=o+"px";var s=e.querySelector(":scope > .white-space:nth-of-type(3)");return void createAttr("style","margin-top:"+(a.offsetHeight+d-s.getBoundingClientRect().top)+"px",s.nextElementSibling)}return 2===n?(o=d,l=r-d-a.offsetHeight-getFooterHeight(),c.style.height=l+"px",void(c.style["margin-top"]=o+"px")):3===n?(l=r-d-getFooterHeight(),void(c.style.height=l+"px")):4===n?(l=r-a.offsetHeight-getFooterHeight(),void(c.style.height=l+"px")):void 0}function initLandscapeFullscreen(e,t,r,n){}function initMacUserReviewPortrait(e,t,r){createAttr("style","width:"+t+"px",document.querySelector(".cover"))}function getHeightCoverSection(e){var t=e.querySelector(":scope .cover");return t?t.clientHeight:0}function setScrollForTable(e,t){var r=e.querySelectorAll(':scope table[bgcolor="#eeeeee"]');if(r.length>0)for(var n=0;n<r.length;n++)parent=r[n].parentNode,parent.className+=" table-container",parent.style.maxHeight=t+"px",parent.className+=" scrollable-icon"}function addDoneDotToLastParagraph(e){for(var t=e.querySelectorAll(":scope > p"),r=t.length-1;r>=0;r--){var n=t[r];if(n.className.indexOf("photo-credit")<0&&n.className.indexOf("pullQuote")<0)return void(n.className+=" done-dot")}}function getTotalPage(){return parseInt(document.querySelector("body").getAttribute("total-page"))}function getPageHTML(){return"<html>"+document.getElementsByTagName("html")[0].innerHTML.replace(/(<iframe id=\"amreader-iframe\".*?>.*?<\/iframe>)/g,"")+"</html>"}function getPageWidth(){return window.innerWidth}function removeFirstImage(e){var t=e.querySelectorAll(":scope .image img");if(t.length>0)for(var r=0;r<t.length;r++){var n=t[r].parentNode;if(n.className&&"default-image"!=n.className){var o=n.nextSibling;return"FIGCAPTION"==o.nodeName&&o.parentNode.removeChild(o),void n.parentNode.removeChild(n)}}}function removeEmptyFigcaption(){var e=document.querySelectorAll("figcaption");if(null!=e)for(var t=0;t<e.length;t++){var r=e[t];""==r.textContent.trim()&&r.parentNode.removeChild(r)}}function removePhotoCreditEmpty(){var e=document.querySelector("photo-credit");e&&(""!=e.textContent.trim()&&null!=e.textContent||e.parentNode.removeChild(e))}function createAttr(e,t,r){var n=document.createAttribute(e);n.value=t,r.attributes.setNamedItem(n)}function getStyle(e){return e.currentStyle||window.getComputedStyle(e)}function createStyleTag(e,t){var r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.id=t,n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),r.appendChild(n)}function getIndex(e,t){return Array.prototype.slice.call(e.children).indexOf(t)}function getTextNodes(e){var t=[];if(e.hasChildNodes()){for(var r=e.childNodes,n=0;n<r.length;n++)r[n].nodeType==Node.TEXT_NODE?t.push(r[n]):r[n].nodeType==Node.ELEMENT_NODE&&r[n].className.indexOf("dropcap-letter")<0&&Array.prototype.push.apply(t,getTextNodes(r[n]));return t}}function reloadStylesheets(){for(var e=document.getElementsByTagName("link"),t=0;t<e.length;t++){var r=e[t].getAttribute("href");e[t].setAttribute("href",r)}}function getQuery(e,t){var r=new RegExp(".*[#&]"+e+"=([^&$]+).*","g").exec(window.location.hash);return r=r?r[1]:t}function getColumnWidth(){var e=parseInt(getQuery("width",window.innerWidth)),t=e/3;return document.getElementById("t1").className.indexOf("landscape")<0&&(t=e/2),t-72}function getFooterHeight(){return document.querySelector(".footer").offsetHeight}function getEmbedSize(){var e=parseInt(getQuery("width",window.innerWidth)),t=e/3;return document.getElementById("t1").className.indexOf("landscape")<0&&(t=e/2),e-Math.floor(t)+36}function createDropcap(e){var t=e.querySelectorAll(":scope > p:not(.author):not(.strap-line):not(.title):not(.pullQuote)");if(t.length>0){var r=t[0];""!=r.textContent&&r.firstChild&&"B"===r.firstChild.nodeName&&(r.className+=" dropcap")}}function convertPxToInt(e){var t=(e=e.replace(/ /g,"")).length;return+e.substring(0,t-2)}