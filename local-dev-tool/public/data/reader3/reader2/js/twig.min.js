var Twig=function(e){return e.VERSION="0.7.2",e}(Twig||{}),Twig=function(e){"use strict";function t(e,t){var r=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&r===e}function r(t,r){var n,o,s,i="/",a=[];if(t.url)n="undefined"!=typeof t.base?t.base+("/"===t.base.charAt(t.base.length-1)?"":"/"):t.url;else{if(!t.path)throw new e.Error("Cannot extend an inline template.");var p=require("path"),l=p.sep||i,c=new RegExp("^\\.{1,2}"+l.replace("\\","\\\\"));r=r.replace(/\//g,l),void 0!==t.base&&null==r.match(c)?(r=r.replace(t.base,""),n=t.base+l):n=t.path,n=n.replace(l+l,l),i=l}for(o=n.split(i),o.pop(),o=o.concat(r.split(i));o.length>0;)s=o.shift(),"."==s||(".."==s&&a.length>0&&".."!=a[a.length-1]?a.pop():a.push(s));return a.join(i)}return e.trace=!1,e.debug=!1,e.cache=!0,e.placeholders={parent:"{{|PARENT|}}"},e.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(void 0===e||null===e)throw new TypeError;var r=Object(e),n=r.length>>>0;if(0===n)return-1;var o=0;if(arguments.length>0&&(o=Number(arguments[1]),o!==o?o=0:0!==o&&1/0!==o&&o!==-1/0&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=n)return-1;for(var s=o>=0?o:Math.max(n-Math.abs(o),0);n>s;s++)if(s in r&&r[s]===t)return s;return e==t?0:-1},e.forEach=function(e,t,r){if(Array.prototype.forEach)return e.forEach(t,r);var n,o;if(null==e)throw new TypeError(" this is null or not defined");var s=Object(e),i=s.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(r&&(n=r),o=0;i>o;){var a;o in s&&(a=s[o],t.call(n,a,o,s)),o++}},e.Error=function(e){this.message=e,this.name="TwigException",this.type="TwigException"},e.Error.prototype.toString=function(){var e=this.name+": "+this.message;return e},e.log={trace:function(){e.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){e.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},e.log.error="undefined"!=typeof console&&"undefined"!=typeof console.log?function(){console.log.apply(console,arguments)}:function(){},e.token={},e.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw"},e.token.definitions=[{type:e.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:e.token.type.output,open:"{{",close:"}}"},{type:e.token.type.logic,open:"{%",close:"%}"},{type:e.token.type.comment,open:"{#",close:"#}"}],e.token.strings=['"',"'"],e.token.findStart=function(t){var r,n,o,s={position:null,def:null};for(r=0;r<e.token.definitions.length;r++)n=e.token.definitions[r],o=t.indexOf(n.open),e.log.trace("Twig.token.findStart: ","Searching for ",n.open," found at ",o),o>=0&&(null===s.position||o<s.position)&&(s.position=o,s.def=n);return s},e.token.findEnd=function(t,r,n){for(var o,s,i=null,a=!1,p=0,l=null,c=null,u=null,f=null,h=null,d=null;!a;){if(l=null,c=null,u=t.indexOf(r.close,p),!(u>=0))throw new e.Error("Unable to find closing bracket '"+r.close+"'"+" opened near template position "+n);if(i=u,a=!0,r.type===e.token.type.comment)break;for(s=e.token.strings.length,o=0;s>o;o+=1)h=t.indexOf(e.token.strings[o],p),h>0&&u>h&&(null===l||l>h)&&(l=h,c=e.token.strings[o]);if(null!==l)for(f=l+1,i=null,a=!1;;){if(d=t.indexOf(c,f),0>d)throw"Unclosed string in template";if("\\"!==t.substr(d-1,1)){p=d+1;break}f=d+1}}return i},e.tokenize=function(t){for(var r=[],n=0,o=null,s=null;t.length>0;)o=e.token.findStart(t),e.log.trace("Twig.tokenize: ","Found token: ",o),null!==o.position?(o.position>0&&r.push({type:e.token.type.raw,value:t.substring(0,o.position)}),t=t.substr(o.position+o.def.open.length),n+=o.position+o.def.open.length,s=e.token.findEnd(t,o.def,n),e.log.trace("Twig.tokenize: ","Token ends at ",s),r.push({type:o.def.type,value:t.substring(0,s).trim()}),"logic"===o.def.type&&"\n"===t.substr(s+o.def.close.length,1)&&(s+=1),t=t.substr(s+o.def.close.length),n+=s+o.def.close.length):(r.push({type:e.token.type.raw,value:t}),t="");return r},e.compile=function(t){try{for(var r=[],n=[],o=[],s=null,i=null,a=null,p=null,l=null,c=null,u=null,f=null,h=null;t.length>0;){switch(s=t.shift(),e.log.trace("Compiling token ",s),s.type){case e.token.type.raw:n.length>0?o.push(s):r.push(s);break;case e.token.type.logic:if(i=e.logic.compile.apply(this,[s]),u=i.type,f=e.logic.handler[u].open,h=e.logic.handler[u].next,e.log.trace("Twig.compile: ","Compiled logic token to ",i," next is: ",h," open is : ",f),void 0!==f&&!f){if(p=n.pop(),l=e.logic.handler[p.type],e.indexOf(l.next,u)<0)throw new Error(u+" not expected after a "+p.type);p.output=p.output||[],p.output=p.output.concat(o),o=[],c={type:e.token.type.logic,token:p},n.length>0?o.push(c):r.push(c)}void 0!==h&&h.length>0?(e.log.trace("Twig.compile: ","Pushing ",i," to logic stack."),n.length>0&&(p=n.pop(),p.output=p.output||[],p.output=p.output.concat(o),n.push(p),o=[]),n.push(i)):void 0!==f&&f&&(c={type:e.token.type.logic,token:i},n.length>0?o.push(c):r.push(c));break;case e.token.type.comment:break;case e.token.type.output:e.expression.compile.apply(this,[s]),n.length>0?o.push(s):r.push(s)}e.log.trace("Twig.compile: "," Output: ",r," Logic Stack: ",n," Pending Output: ",o)}if(n.length>0)throw a=n.pop(),new Error("Unable to find an end tag for "+a.type+", expecting one of "+a.next);return r}catch(d){if(e.log.error("Error compiling twig template "+this.id+": "),d.stack?e.log.error(d.stack):e.log.error(d.toString()),this.options.rethrow)throw d}},e.parse=function(t,r){try{var n=[],o=!0,s=this;return r=r||{},e.forEach(t,function(t){switch(e.log.debug("Twig.parse: ","Parsing token: ",t),t.type){case e.token.type.raw:n.push(t.value);break;case e.token.type.logic:var i=t.token,a=e.logic.parse.apply(s,[i,r,o]);void 0!==a.chain&&(o=a.chain),void 0!==a.context&&(r=a.context),void 0!==a.output&&n.push(a.output);break;case e.token.type.comment:break;case e.token.type.output:e.log.debug("Twig.parse: ","Output token: ",t.stack),n.push(e.expression.parse.apply(s,[t.stack,r]))}}),n.join("")}catch(i){if(e.log.error("Error parsing twig template "+this.id+": "),i.stack?e.log.error(i.stack):e.log.error(i.toString()),this.options.rethrow)throw i;if(e.debug)return i.toString()}},e.prepare=function(t){var r,n;return e.log.debug("Twig.prepare: ","Tokenizing ",t),n=e.tokenize.apply(this,[t]),e.log.debug("Twig.prepare: ","Compiling ",n),r=e.compile.apply(this,[n]),e.log.debug("Twig.prepare: ","Compiled ",r),r},e.Templates={registry:{}},e.validateId=function(t){if("prototype"===t)throw new e.Error(t+" is not a valid twig identifier");if(e.Templates.registry.hasOwnProperty(t))throw new e.Error("There is already a template with the ID "+t);return!0},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error("Unable to save template with no id");e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,r,n,o){var s=r.id,i=r.method,a=r.async,p=r.precompiled,l=null;if(void 0===a&&(a=!0),void 0===s&&(s=t),r.id=s,e.cache&&e.Templates.registry.hasOwnProperty(s))return n&&n(e.Templates.registry[s]),e.Templates.registry[s];if("ajax"==i){if("undefined"==typeof XMLHttpRequest)throw new e.Error("Unsupported platform: Unable to do remote requests because there is no XMLHTTPRequest implementation");var c=new XMLHttpRequest;c.onreadystatechange=function(){var s=null;if(4==c.readyState){var i=/android/i.test(navigator.userAgent);200==c.status||i&&0==c.status?(e.log.debug("Got template ",c.responseText),s=p===!0?JSON.parse(c.responseText):c.responseText,r.url=t,r.data=s,l=new e.Template(r),n&&n(l)):o&&o(c)}},c.open("GET",t,a),c.send()}else!function(){var s=require("fs"),i=(require("path"),null),c=function(s,i){return s?(o&&o(s),void 0):(p===!0&&(i=JSON.parse(i)),r.data=i,r.path=t,l=new e.Template(r),n&&n(l),void 0)};if(a===!0)s.stat(t,function(r,n){if(r||!n.isFile())throw new e.Error("Unable to find template file "+t);s.readFile(t,"utf8",c)});else{if(!s.statSync(t).isFile())throw new e.Error("Unable to find template file "+t);i=s.readFileSync(t,"utf8"),c(void 0,i)}}();return a===!1?l:!0},e.Template=function(r){var n=r.data,o=r.id,s=r.blocks,i=r.macros||{},a=r.base,p=r.path,l=r.url,c=r.options;this.id=o,this.base=a,this.path=p,this.url=l,this.macros=i,this.options=c,this.reset(s),this.tokens=t("String",n)?e.prepare.apply(this,[n]):n,void 0!==o&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.child={blocks:t||{}},this.extend=null},e.Template.prototype.render=function(t,n){n=n||{};var o,s;if(this.context=t||{},this.reset(),n.blocks&&(this.blocks=n.blocks),n.macros&&(this.macros=n.macros),o=e.parse.apply(this,[this.tokens,this.context]),this.extend){var i;return this.options.allowInlineIncludes&&(i=e.Templates.load(this.extend),i&&(i.options=this.options)),i||(s=r(this,this.extend),i=e.Templates.loadRemote(s,{method:this.url?"ajax":"fs",base:this.base,async:!1,id:s,options:this.options})),this.parent=i,this.parent.render(this.context,{blocks:this.blocks})}return"blocks"==n.output?this.blocks:"macros"==n.output?this.macros:o},e.Template.prototype.importFile=function(t){var n,o;if(!this.url&&!this.path&&this.options.allowInlineIncludes){if(o=e.Templates.load(t),o.options=this.options,o)return o;throw new e.Error("Didn't find the inline template by id")}return n=r(this,t),o=e.Templates.loadRemote(n,{method:this.url?"ajax":"fs",base:this.base,async:!1,options:this.options,id:n})},e.Template.prototype.importBlocks=function(t,r){var n=this.importFile(t),o=this.context,s=this;r=r||!1,n.render(o),e.forEach(Object.keys(n.blocks),function(e){(r||void 0===s.blocks[e])&&(s.blocks[e]=n.blocks[e])})},e.Template.prototype.importMacros=function(t){var n=r(this,t),o=e.Templates.loadRemote(n,{method:this.url?"ajax":"fs",async:!1,id:n});return o},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e}(Twig||{});!function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r})}();var Twig=function(e){e.lib={};var t=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function r(e,t){for(var r=[];t>0;r[--t]=e);return r.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,o){var s,i,a,p,l,c,u,f=1,h=n.length,d="",g=[];for(i=0;h>i;i++)if(d=e(n[i]),"string"===d)g.push(n[i]);else if("array"===d){if(p=n[i],p[2])for(s=o[f],a=0;a<p[2].length;a++){if(!s.hasOwnProperty(p[2][a]))throw t('[sprintf] property "%s" does not exist',p[2][a]);s=s[p[2][a]]}else s=p[1]?o[p[1]]:o[f++];if(/[^s]/.test(p[8])&&"number"!=e(s))throw t("[sprintf] expecting number but found %s",e(s));switch(p[8]){case"b":s=s.toString(2);break;case"c":s=String.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=p[7]?s.toExponential(p[7]):s.toExponential();break;case"f":s=p[7]?parseFloat(s).toFixed(p[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=String(s))&&p[7]?s.substring(0,p[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}var y="";/[def]/.test(p[8])&&(y=p[3]?s>=0?"+":"-":s>=0?"":"-",s=Math.abs(s)),c=p[4]?"0"==p[4]?"0":p[4].charAt(1):" ",u=p[6]-String(s).length-y.length,l=p[6]?r(c,u):"",p[5]?(g.push(y),g.push(s),g.push(l)):"0"==c?(g.push(y),g.push(l),g.push(s)):(g.push(l),g.push(y),g.push(s))}return g.join("")},n.cache={},n.parse=function(e){for(var t=e,r=[],n=[],o=0;t;){if(null!==(r=/^[^\x25]+/.exec(t)))n.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(t)))n.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw"[sprintf] huh?";if(r[2]){o|=1;var s=[],i=r[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(i)))throw"[sprintf] huh?";for(s.push(a[1]);""!==(i=i.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(i)))s.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(i)))throw"[sprintf] huh?";s.push(a[1])}r[2]=s}else o|=2;if(3===o)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";n.push(r)}t=t.substring(r[0].length)}return n},n}(),r=function(e,r){return r.unshift(e),t.apply(null,r)};return e.lib.sprintf=t,e.lib.vsprintf=r,function(){function t(e){return 1==(e=Math.abs(e)%100)%10&&11!=e?"st":2==e%10&&12!=e?"nd":3==e%10&&13!=e?"rd":"th"}function r(e){var t=new Date(e.getFullYear()+1,0,4);return 7>(t-e)/864e5&&(e.getDay()+6)%7<(t.getDay()+6)%7?t.getFullYear():e.getMonth()>0||e.getDate()>=4?e.getFullYear():e.getFullYear()-((e.getDay()+6)%7-e.getDate()>2?1:0)}function n(e){var t=new Date(r(e),0,4);return t.setDate(t.getDate()-(t.getDay()+6)%7),parseInt((e-t)/6048e5)+1}var o="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),s="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),i="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),a="January,February,March,April,May,June,July,August,September,October,November,December".split(",");e.lib.formatDate=function(e,p){if("string"!=typeof p||/^\s*$/.test(p))return e+"";var l=new Date(e.getFullYear(),0,1),c=e;return p.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisuU]/g,function(e){switch(e){case"d":return("0"+c.getDate()).replace(/^.+(..)$/,"$1");case"D":return o[c.getDay()];case"j":return c.getDate();case"l":return s[c.getDay()];case"N":return(c.getDay()+6)%7+1;case"S":return t(c.getDate());case"w":return c.getDay();case"z":return Math.ceil((l-c)/864e5);case"W":return("0"+n(c)).replace(/^.(..)$/,"$1");case"F":return a[c.getMonth()];case"m":return("0"+(c.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return i[c.getMonth()];case"n":return c.getMonth()+1;case"t":return new Date(c.getFullYear(),c.getMonth()+1,-1).getDate();case"L":return 29==new Date(c.getFullYear(),1,29).getDate()?1:0;case"o":return r(c);case"Y":return c.getFullYear();case"y":return(c.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return c.getHours()<12?"am":"pm";case"A":return c.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((c.getUTCHours()+1)%24+c.getUTCMinutes()/60+c.getUTCSeconds()/3600)/24);case"g":return 0!=c.getHours()%12?c.getHours()%12:12;case"G":return c.getHours();case"h":return("0"+(0!=c.getHours()%12?c.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+c.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+c.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+c.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return c.getMilliseconds();case"U":return c.getTime()/1e3}})}}(),e.lib.strip_tags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var r=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(n,"").replace(r,function(e,r){return t.indexOf("<"+r.toLowerCase()+">")>-1?e:""})},e.lib.parseISO8601Date=function(e){var t=/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/,r=[];if(r=e.match(t),!r)throw"Couldn't parse ISO 8601 date string '"+e+"'";var n=[1,2,3,4,5,6,10,11];for(var o in n)r[n[o]]=parseInt(r[n[o]],10);r[7]=parseFloat(r[7]);var s=Date.UTC(r[1],r[2]-1,r[3],r[4],r[5],r[6]);if(r[7]>0&&(s+=Math.round(1e3*r[7])),"Z"!=r[8]&&r[10]){var i=1e3*60*60*r[10];r[11]&&(i+=1e3*60*r[11]),"-"==r[9]?s-=i:s+=i}return new Date(s)},e.lib.strtotime=function(t,r){var n,o,s,i,a="";if(t=t.replace(/\s{2,}|^\s|\s$/g," "),t=t.replace(/[\t\r\n]/g,""),"now"===t)return null===r||isNaN(r)?0|(new Date).getTime()/1e3:0|r;if(!isNaN(a=Date.parse(t)))return 0|a/1e3;r=r?new Date(1e3*r):new Date;var p=t;t=t.toLowerCase();var l={day:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},mon:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},c=function(e){var t=e[2]&&"ago"===e[2],n=(n="last"===e[0]?-1:1)*(t?-1:1);switch(e[0]){case"last":case"next":switch(e[1].substring(0,3)){case"yea":r.setFullYear(r.getFullYear()+n);break;case"wee":r.setDate(r.getDate()+7*n);break;case"day":r.setDate(r.getDate()+n);break;case"hou":r.setHours(r.getHours()+n);break;case"min":r.setMinutes(r.getMinutes()+n);break;case"sec":r.setSeconds(r.getSeconds()+n);break;case"mon":if("month"===e[1]){r.setMonth(r.getMonth()+n);break}default:var o=l.day[e[1].substring(0,3)];if("undefined"!=typeof o){var s=o-r.getDay();0===s?s=7*n:s>0?"last"===e[0]&&(s-=7):"next"===e[0]&&(s+=7),r.setDate(r.getDate()+s),r.setHours(0,0,0,0)}}break;default:if(!/\d+/.test(e[0]))return!1;switch(n*=parseInt(e[0],10),e[1].substring(0,3)){case"yea":r.setFullYear(r.getFullYear()+n);break;case"mon":r.setMonth(r.getMonth()+n);break;case"wee":r.setDate(r.getDate()+7*n);break;case"day":r.setDate(r.getDate()+n);break;case"hou":r.setHours(r.getHours()+n);break;case"min":r.setMinutes(r.getMinutes()+n);break;case"sec":r.setSeconds(r.getSeconds()+n)}}return!0};if(s=t.match(/^(\d{2,4}-\d{2}-\d{2})(?:\s(\d{1,2}:\d{2}(:\d{2})?)?(?:\.(\d+))?)?$/),null!==s)return s[2]?s[3]||(s[2]+=":00"):s[2]="00:00:00",i=s[1].split(/-/g),i[1]=l.mon[i[1]-1]||i[1],i[0]=+i[0],i[0]=i[0]>=0&&i[0]<=69?"20"+(i[0]<10?"0"+i[0]:i[0]+""):i[0]>=70&&i[0]<=99?"19"+i[0]:i[0]+"",parseInt(this.strtotime(i[2]+" "+i[1]+" "+i[0]+" "+s[2])+(s[4]?s[4]/1e3:""),10);var u="([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday)|(last|next)\\s(years?|months?|weeks?|days?|hours?|min|minutes?|sec|seconds?|sun\\.?|sunday|mon\\.?|monday|tue\\.?|tuesday|wed\\.?|wednesday|thu\\.?|thursday|fri\\.?|friday|sat\\.?|saturday))(\\sago)?";if(s=t.match(new RegExp(u,"gi")),null===s){try{if(num=e.lib.parseISO8601Date(p))return 0|num/1e3}catch(f){return!1}return!1}for(n=0,o=s.length;o>n;n++)if(!c(s[n].split(" ")))return!1;return 0|r.getTime()/1e3},e.lib.is=function(e,t){var r=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&r===e},e.lib.copy=function(e){var t,r={};for(t in e)r[t]=e[t];return r},e.lib.replaceAll=function(e,t,r){return e.split(t).join(r)},e.lib.chunkArray=function(t,r){var n=[],o=0,s=t.length;if(1>r||!e.lib.is("Array",t))return[];for(;s>o;)n.push(t.slice(o,o+=r));return n},e.lib.round=function(e,t,r){var n,o,s,i;if(t|=0,n=Math.pow(10,t),e*=n,i=e>0|-(0>e),s=e%1===.5*i,o=Math.floor(e),s)switch(r){case"PHP_ROUND_HALF_DOWN":e=o+(0>i);break;case"PHP_ROUND_HALF_EVEN":e=o+o%2*i;break;case"PHP_ROUND_HALF_ODD":e=o+!(o%2);break;default:e=o+(i>0)}return(s?e:Math.round(e))/n},e}(Twig||{}),Twig=function(e){"use strict";for(e.logic={},e.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends"},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\s+([^\s].+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var r=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack,delete t.match,t},parse:function(t,r,n){var o="",s=e.expression.parse.apply(this,[t.stack,r]);return n=!0,s&&(n=!1,o=e.parse.apply(this,[t.output,r])),{chain:n,output:o}}},{type:e.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var r=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack,delete t.match,t},parse:function(t,r,n){var o="";return n&&e.expression.parse.apply(this,[t.stack,r])===!0&&(n=!1,o=e.parse.apply(this,[t.output,r])),{chain:n,output:o}}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,r,n){var o="";return n&&(o=e.parse.apply(this,[t.output,r])),{chain:n,output:o}}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var r=t.match[1],n=t.match[2],o=t.match[3],s=null;if(t.key_var=null,t.value_var=null,r.indexOf(",")>=0){if(s=r.split(","),2!==s.length)throw new e.Error("Invalid expression in for loop: "+r);t.key_var=s[0].trim(),t.value_var=s[1].trim()}else t.value_var=r;return t.expression=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,o&&(t.conditional=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:o}]).stack),delete t.match,t},parse:function(t,r,n){var o,s,i=e.expression.parse.apply(this,[t.expression,r]),a=[],p=0,l=this,c=t.conditional,u=function(e,t){var n=void 0!==c;return{index:e+1,index0:e,revindex:n?void 0:t-e,revindex0:n?void 0:t-e-1,first:0===e,last:n?void 0:e===t-1,length:n?void 0:t,parent:r}},f=function(n,s){var i=e.lib.copy(r);i[t.value_var]=s,t.key_var&&(i[t.key_var]=n),i.loop=u(p,o),(void 0===c||e.expression.parse.apply(l,[c,i]))&&(a.push(e.parse.apply(l,[t.output,i])),p+=1)};return i instanceof Array?(o=i.length,e.forEach(i,function(e){var t=p;f(t,e)})):i instanceof Object&&(s=void 0!==i._keys?i._keys:Object.keys(i),o=s.length,e.forEach(s,function(e){"_keys"!==e&&f(e,i[e])})),n=0===a.length,{chain:n,output:a.join("")}}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*(.+)$/,next:[],open:!0,compile:function(t){var r=t.match[1].trim(),n=t.match[2],o=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack;return t.key=r,t.expression=o,delete t.match,t},parse:function(t,r,n){var o=e.expression.parse.apply(this,[t.expression,r]),s=t.key;return this.context[s]=o,r[s]=o,{chain:n,context:r}}},{type:e.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,r,n){var o="",s="",i=this.blocks[t.block]&&this.blocks[t.block].indexOf(e.placeholders.parent)>-1;return(void 0===this.blocks[t.block]||i||r.loop)&&(o=e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.parse.apply(this,[t.output,r])},r]),this.blocks[t.block]=i?this.blocks[t.block].replace(e.placeholders.parent,o):o),s=this.child.blocks[t.block]?this.child.blocks[t.block]:this.blocks[t.block],{chain:n,output:s}}},{type:e.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(t){var r=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack,t},parse:function(t,r,n){var o=e.expression.parse.apply(this,[t.stack,r]);return this.extend=o,{chain:n,output:""}}}],e.logic.handler={},e.logic.extendType=function(t,r){r=r||"Twig.logic.type"+t,e.logic.type[t]=r},e.logic.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);if(e.logic.type[t.type])throw new e.Error("Unable to extend logic definitions. Type "+t.type+" is already defined.");e.logic.extendType(t.type),e.logic.handler[t.type]=t};e.logic.definitions.length>0;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var r=t.value.trim(),n=e.logic.tokenize.apply(this,[r]),o=e.logic.handler[n.type];return o.compile&&(n=o.compile.apply(this,[n]),e.log.trace("Twig.logic.compile: ","Compiled logic token to ",n)),n},e.logic.tokenize=function(t){var r={},n=null,o=null,s=null,i=null,a=null,p=null;t=t.trim();for(n in e.logic.handler)if(e.logic.handler.hasOwnProperty(n))for(o=e.logic.handler[n].type,s=e.logic.handler[n].regex,i=[],s instanceof Array?i=s:i.push(s);i.length>0;)if(a=i.shift(),p=a.exec(t.trim()),null!==p)return r.type=o,r.match=p,e.log.trace("Twig.logic.tokenize: ","Matched a ",o," regular expression of ",p),r;throw new e.Error("Unable to parse '"+t.trim()+"'")},e.logic.parse=function(t,r,n){var o,s="";return r=r||{},e.log.debug("Twig.logic.parse: ","Parsing logic token ",t),o=e.logic.handler[t.type],o.parse&&(s=o.parse.apply(this,[t,r,n])),s},e}(Twig||{}),Twig=function(e){"use strict";e.expression={},e.expression.reservedWords=["true","false","null","_context"],e.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets]),e.expression.fn={compile:{push:function(e,t,r){r.push(e)},push_both:function(e,t,r){r.push(e),t.push(e)}},parse:{push:function(e,t){t.push(e)},push_value:function(e,t){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,r){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,r.push(e)},parse:function(t,r,n){var o=r.pop(),s=t.params&&e.expression.parse.apply(this,[t.params,n]),i=e.test(t.filter,o,s);"not"==t.modifier?r.push(!i):r.push(i)}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,r,n){var o,s=r.length-1;for(delete t.match,delete t.value;s>=0;s--){if(o=r.pop(),o.type===e.expression.type.object.start||o.type===e.expression.type.parameter.start||o.type===e.expression.type.array.start){r.push(o);break}n.push(o)}n.push(t)}},{type:e.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.)/,next:e.expression.set.expressions.concat([e.expression.type.operator.unary]),compile:function(t,r,n){delete t.match,t.value=t.value.trim();var o=t.value,s=e.expression.operator.lookup(o,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",s," from ",o);r.length>0&&(r[r.length-1].type==e.expression.type.operator.unary||r[r.length-1].type==e.expression.type.operator.binary)&&(s.associativity===e.expression.operator.leftToRight&&s.precidence>=r[r.length-1].precidence||s.associativity===e.expression.operator.rightToLeft&&s.precidence>r[r.length-1].precidence);){var i=r.pop();n.push(i)}if(":"===o){if(!r[r.length-1]||"?"!==r[r.length-1].value){var a=n.pop();if(a.type!==e.expression.type.string&&a.type!==e.expression.type.variable&&a.type!==e.expression.type.number)throw new e.Error("Unexpected value before ':' of "+a.type+" = "+a.value);return t.key=a.value,n.push(t),void 0}}else r.push(s)},parse:function(t,r){t.key?r.push(t):e.expression.operator.parse(t.value,r)}},{type:e.expression.type.operator.unary,regex:/(^not\s+)/,next:e.expression.set.expressions,compile:function(t,r,n){delete t.match,t.value=t.value.trim();var o=t.value,s=e.expression.operator.lookup(o,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",s," from ",o);r.length>0&&(r[r.length-1].type==e.expression.type.operator.unary||r[r.length-1].type==e.expression.type.operator.binary)&&(s.associativity===e.expression.operator.leftToRight&&s.precidence>=r[r.length-1].precidence||s.associativity===e.expression.operator.rightToLeft&&s.precidence>r[r.length-1].precidence);){var i=r.pop();n.push(i)}r.push(s)},parse:function(t,r){e.expression.operator.parse(t.value,r)}},{type:e.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2.)*?\1/,next:e.expression.set.operations,compile:function(t,r,n){var o=t.value;delete t.match,o='"'===o.substring(0,1)?o.replace('\\"','"'):o.replace("\\'","'"),t.value=o.substring(1,o.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),e.log.trace("Twig.expression.compile: ","String value: ",t.value),n.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.parameter.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\)/,next:e.expression.set.operations_extended,compile:function(t,r,n){var o,s=t;for(o=r.pop();r.length>0&&o.type!=e.expression.type.parameter.start;)n.push(o),o=r.pop();for(var i=[];t.type!==e.expression.type.parameter.start;)i.unshift(t),t=n.pop();i.unshift(t),t=n[n.length-1],void 0===t||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets&&t.type!==e.expression.type.key.period?(s.expression=!0,i.pop(),i.shift(),s.params=i,n.push(s)):(s.expression=!1,t.params=i)},parse:function(t,r,n){var o=[],s=!1,i=null;if(t.expression)i=e.expression.parse.apply(this,[t.params,n]),r.push(i);else{for(;r.length>0;){if(i=r.pop(),i&&i.type&&i.type==e.expression.type.parameter.start){s=!0;break}o.unshift(i)}if(!s)throw new e.Error("Expected end of parameter set.");r.push(o)}}},{type:e.expression.type.array.start,regex:/^\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\]/,next:e.expression.set.operations_extended,compile:function(t,r,n){for(var o,s=r.length-1;s>=0&&(o=r.pop(),o.type!==e.expression.type.array.start);s--)n.push(o);n.push(t)},parse:function(t,r){for(var n=[],o=!1,s=null;r.length>0;){if(s=r.pop(),s.type&&s.type==e.expression.type.array.start){o=!0;break}n.unshift(s)}if(!o)throw new e.Error("Expected end of array.");r.push(n)}},{type:e.expression.type.object.start,regex:/^\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\}/,next:e.expression.set.operations_extended,compile:function(t,r,n){for(var o,s=r.length-1;s>=0&&(o=r.pop(),!o||o.type!==e.expression.type.object.start);s--)n.push(o);n.push(t)},parse:function(t,r){for(var n={},o=!1,s=null,i=!1,a=null;r.length>0;){if(s=r.pop(),s&&s.type&&s.type===e.expression.type.object.start){o=!0;break}if(s&&s.type&&(s.type===e.expression.type.operator.binary||s.type===e.expression.type.operator.unary)&&s.key){if(!i)throw new e.Error("Missing value for key '"+s.key+"' in object definition.");n[s.key]=a,void 0===n._keys&&(n._keys=[]),n._keys.unshift(s.key),a=null,i=!1}else i=!0,a=s}if(!o)throw new e.Error("Unexpected end of object.");r.push(n)
}},{type:e.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,r){e.value=e.match[1],r.push(e)},parse:function(t,r,n){var o=r.pop(),s=t.params&&e.expression.parse.apply(this,[t.params,n]);r.push(e.filter.apply(this,[t.value,o,s]))}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:e.expression.type.parameter.start,transform:function(){return"("},compile:function(e,t,r){var n=e.match[1];e.fn=n,delete e.match,delete e.value,r.push(e)},parse:function(t,r,n){var o,s=t.params&&e.expression.parse.apply(this,[t.params,n]),i=t.fn;if(e.functions[i])o=e.functions[i].apply(this,s);else{if("function"!=typeof n[i])throw new e.Error(i+" function does not exist and is not defined in the context");o=n[i].apply(n,s)}r.push(o)}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t){return e.indexOf(e.expression.reservedWords,t[0])<0},parse:function(t,r,n){var o=e.expression.resolve(n[t.value],n);r.push(o)}},{type:e.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,r){e.key=e.match[1],delete e.match,delete e.value,r.push(e)},parse:function(t,r,n){var o,s=t.params&&e.expression.parse.apply(this,[t.params,n]),i=t.key,a=r.pop();if(null===a||void 0===a){if(this.options.strict_variables)throw new e.Error("Can't access a key "+i+" on an null or undefined object.");return null}var p=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};o="object"==typeof a&&i in a?a[i]:void 0!==a["get"+p(i)]?a["get"+p(i)]:void 0!==a["is"+p(i)]?a["is"+p(i)]:null,r.push(e.expression.resolve(o,a,s))}},{type:e.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,r,n){var o=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:o}).stack,n.push(t)},parse:function(t,r,n){var o,s=t.params&&e.expression.parse.apply(this,[t.params,n]),i=e.expression.parse.apply(this,[t.stack,n]),a=r.pop();if(null===a||void 0===a){if(this.options.strict_variables)throw new e.Error("Can't access a key "+i+" on an null or undefined object.");return null}o="object"==typeof a&&i in a?a[i]:null,r.push(e.expression.resolve(o,a,s))}},{type:e.expression.type._null,regex:/^null/,next:e.expression.set.operations,compile:function(e,t,r){delete e.match,e.value=null,r.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,r){t.push(r)}},{type:e.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:e.expression.set.operations,compile:function(e,t,r){e.value=Number(e.value),r.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.bool,regex:/^(true|false)/,next:e.expression.set.operations,compile:function(e,t,r){e.value="true"==e.match[0],delete e.match,r.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolve=function(e,t,r){return"function"==typeof e?e.apply(t,r||[]):e},e.expression.handler={},e.expression.extendType=function(t){e.expression.type[t]="Twig.expression.type."+t},e.expression.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.expression.handler[t.type]=t};for(;e.expression.definitions.length>0;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var r,n,o,s,i,a,p=[],l=0,c=null,u=[];for(a=function(){var t=Array.prototype.slice.apply(arguments);return t.pop(),t.pop(),e.log.trace("Twig.expression.tokenize","Matched a ",r," regular expression of ",t),c&&e.indexOf(c,r)<0?(u.push(r+" cannot follow a "+p[p.length-1].type+" at template:"+l+" near '"+t[0].substring(0,20)+"...'"),t[0]):e.expression.handler[r].validate&&!e.expression.handler[r].validate(t,p)?t[0]:(u=[],p.push({type:r,value:t[0],match:t}),i=!0,c=s,l+=t[0].length,e.expression.handler[r].transform?e.expression.handler[r].transform(t,p):"")},e.log.debug("Twig.expression.tokenize","Tokenizing expression ",t);t.length>0;){t=t.trim();for(r in e.expression.handler)if(e.expression.handler.hasOwnProperty(r)){for(s=e.expression.handler[r].next,n=e.expression.handler[r].regex,o=n instanceof Array?n:[n],i=!1;o.length>0;)n=o.pop(),t=t.replace(n,a);if(i)break}if(!i)throw u.length>0?new e.Error(u.join(" OR ")):new e.Error("Unable to parse '"+t+"' at template position"+l)}return e.log.trace("Twig.expression.tokenize","Tokenized to ",p),p},e.expression.compile=function(t){var r=t.value,n=e.expression.tokenize(r),o=null,s=[],i=[],a=null;for(e.log.trace("Twig.expression.compile: ","Compiling ",r);n.length>0;)o=n.shift(),a=e.expression.handler[o.type],e.log.trace("Twig.expression.compile: ","Compiling ",o),a.compile&&a.compile(o,i,s),e.log.trace("Twig.expression.compile: ","Stack is",i),e.log.trace("Twig.expression.compile: ","Output is",s);for(;i.length>0;)s.push(i.pop());return e.log.trace("Twig.expression.compile: ","Final output is",s),t.stack=s,delete t.value,t},e.expression.parse=function(t,r){var n=this;t instanceof Array||(t=[t]);var o=[],s=null;return e.forEach(t,function(t){s=e.expression.handler[t.type],s.parse&&s.parse.apply(n,[t,o,r])}),o.pop()},e}(Twig||{}),Twig=function(e){"use strict";e.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var t=function(e,t){if(void 0!==t.indexOf)return e===t||""!==e&&t.indexOf(e)>-1;var r;for(r in t)if(t.hasOwnProperty(r)&&t[r]===e)return!0;return!1};return e.expression.operator.lookup=function(t,r){switch(t){case"..":case"not in":case"in":r.precidence=20,r.associativity=e.expression.operator.leftToRight;break;case",":r.precidence=18,r.associativity=e.expression.operator.leftToRight;break;case"?":case":":r.precidence=16,r.associativity=e.expression.operator.rightToLeft;break;case"or":r.precidence=14,r.associativity=e.expression.operator.leftToRight;break;case"and":r.precidence=13,r.associativity=e.expression.operator.leftToRight;break;case"==":case"!=":r.precidence=9,r.associativity=e.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":r.precidence=8,r.associativity=e.expression.operator.leftToRight;break;case"~":case"+":case"-":r.precidence=6,r.associativity=e.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":r.precidence=5,r.associativity=e.expression.operator.leftToRight;break;case"not":r.precidence=3,r.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error(t+" is an unknown operator.")}return r.operator=t,r},e.expression.operator.parse=function(r,n){e.log.trace("Twig.expression.operator.parse: ","Handling ",r);var o,s,i;switch(r){case":":break;case"?":i=n.pop(),s=n.pop(),o=n.pop(),o?n.push(s):n.push(i);break;case"+":s=parseFloat(n.pop()),o=parseFloat(n.pop()),n.push(o+s);break;case"-":s=parseFloat(n.pop()),o=parseFloat(n.pop()),n.push(o-s);break;case"*":s=parseFloat(n.pop()),o=parseFloat(n.pop()),n.push(o*s);break;case"/":s=parseFloat(n.pop()),o=parseFloat(n.pop()),n.push(o/s);break;case"//":s=parseFloat(n.pop()),o=parseFloat(n.pop()),n.push(parseInt(o/s));break;case"%":s=parseFloat(n.pop()),o=parseFloat(n.pop()),n.push(o%s);break;case"~":s=n.pop(),o=n.pop(),n.push((null!=o?o.toString():"")+(null!=s?s.toString():""));break;case"not":case"!":n.push(!n.pop());break;case"<":s=n.pop(),o=n.pop(),n.push(s>o);break;case"<=":s=n.pop(),o=n.pop(),n.push(s>=o);break;case">":s=n.pop(),o=n.pop(),n.push(o>s);break;case">=":s=n.pop(),o=n.pop(),n.push(o>=s);break;case"===":s=n.pop(),o=n.pop(),n.push(o===s);break;case"==":s=n.pop(),o=n.pop(),n.push(o==s);break;case"!==":s=n.pop(),o=n.pop(),n.push(o!==s);break;case"!=":s=n.pop(),o=n.pop(),n.push(o!=s);break;case"or":s=n.pop(),o=n.pop(),n.push(o||s);break;case"and":s=n.pop(),o=n.pop(),n.push(o&&s);break;case"**":s=n.pop(),o=n.pop(),n.push(Math.pow(o,s));break;case"not in":s=n.pop(),o=n.pop(),n.push(!t(o,s));break;case"in":s=n.pop(),o=n.pop(),n.push(t(o,s));break;case"..":s=n.pop(),o=n.pop(),n.push(e.functions.range(o,s));break;default:throw new e.Error(r+" is an unknown operator.")}},e}(Twig||{}),Twig=function(e){function t(e,t){var r=Object.prototype.toString.call(t).slice(8,-1);return void 0!==t&&null!==t&&r===e}return e.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,r){return t+r.toUpperCase()})},length:function(t){return e.lib.is("Array",t)||"string"==typeof t?t.length:e.lib.is("Object",t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t("Array",e))return e.reverse();if(t("String",e))return e.split("").reverse().join("");if(e instanceof Object){var r=e._keys||Object.keys(e).reverse();return e._keys=r,e}},sort:function(e){if(t("Array",e))return e.sort();if(e instanceof Object){delete e._keys;var r=Object.keys(e),n=r.sort(function(t,r){return e[t]>e[r]});return e._keys=n,e}},keys:function(t){if(void 0!==t&&null!==t){var r=t._keys||Object.keys(t),n=[];return e.forEach(r,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&n.push(e)}),n}},url_encode:function(e){return void 0!==e&&null!==e?encodeURIComponent(e):void 0},join:function(t,r){if(void 0!==t&&null!==t){var n="",o=[],s=null;return r&&r[0]&&(n=r[0]),t instanceof Array?o=t:(s=t._keys||Object.keys(t),e.forEach(s,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&o.push(t[e])})),o.join(n)}},"default":function(t,r){if(void 0===r||1!==r.length)throw new e.Error("default filter expects one argument");return void 0===t||null===t||""===t?r[0]:t},json_encode:function(e){return e&&e.hasOwnProperty("_keys")&&delete e._keys,void 0===e||null===e?"null":JSON.stringify(e)},merge:function(t,r){var n=[],o=0,s=[];if(t instanceof Array?e.forEach(r,function(e){e instanceof Array||(n={})}):n={},n instanceof Array||(n._keys=[]),t instanceof Array?e.forEach(t,function(e){n._keys&&n._keys.push(o),n[o]=e,o++}):(s=t._keys||Object.keys(t),e.forEach(s,function(e){n[e]=t[e],n._keys.push(e);var r=parseInt(e,10);!isNaN(r)&&r>=o&&(o=r+1)})),e.forEach(r,function(t){t instanceof Array?e.forEach(t,function(e){n._keys&&n._keys.push(o),n[o]=e,o++}):(s=t._keys||Object.keys(t),e.forEach(s,function(e){n[e]||n._keys.push(e),n[e]=t[e];var r=parseInt(e,10);!isNaN(r)&&r>=o&&(o=r+1)}))}),0===r.length)throw new e.Error("Filter merge expects at least one parameter");return n},date:function(t,r){if(void 0!==t&&null!==t){var n=e.functions.date(t);return e.lib.formatDate(n,r[0])}},date_modify:function(t,r){if(void 0!==t&&null!==t){if(void 0===r||1!==r.length)throw new e.Error("date_modify filter expects 1 argument");var n,o=r[0];return e.lib.is("Date",t)&&(n=e.lib.strtotime(o,t.getTime()/1e3)),e.lib.is("String",t)&&(n=e.lib.strtotime(o,e.lib.strtotime(t))),e.lib.is("Number",t)&&(n=e.lib.strtotime(o,t)),new Date(1e3*n)}},replace:function(t,r){if(void 0!==t&&null!==t){var n,o=r[0];for(n in o)o.hasOwnProperty(n)&&"_keys"!==n&&(t=e.lib.replaceAll(t,n,o[n]));return t}},format:function(t,r){return void 0!==t&&null!==t?e.lib.vsprintf(t,r):void 0},striptags:function(t){return void 0!==t&&null!==t?e.lib.strip_tags(t):void 0},escape:function(e){return void 0!==e&&null!==e?e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):void 0},e:function(t){return e.filters.escape(t)},nl2br:function(t){if(void 0!==t&&null!==t){var r="BACKSLASH_n_replace",n="<br />"+r;return t=e.filters.escape(t).replace(/\r\n/g,n).replace(/\r/g,n).replace(/\n/g,n),e.lib.replaceAll(t,r,"\n")}},number_format:function(e,t){var r=e,n=t&&t[0]?t[0]:void 0,o=t&&void 0!==t[1]?t[1]:".",s=t&&void 0!==t[2]?t[2]:",";r=(r+"").replace(/[^0-9+\-Ee.]/g,"");var i=isFinite(+r)?+r:0,a=isFinite(+n)?Math.abs(n):0,p="",l=function(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r};return p=(a?l(i,a):""+Math.round(i)).split("."),p[0].length>3&&(p[0]=p[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(p[1]||"").length<a&&(p[1]=p[1]||"",p[1]+=new Array(a-p[1].length+1).join("0")),p.join(o)},trim:function(t,r){if(void 0!==t&&null!==t){var n,o=e.filters.escape(""+t);n=r&&r[0]?""+r[0]:" \n\r	\f            ​\u2028\u2029　";for(var s=0;s<o.length;s++)if(-1===n.indexOf(o.charAt(s))){o=o.substring(s);break}for(s=o.length-1;s>=0;s--)if(-1===n.indexOf(o.charAt(s))){o=o.substring(0,s+1);break}return-1===n.indexOf(o.charAt(0))?o:""}},slice:function(t,r){if(void 0!==t&&null!==t){if(void 0===r||r.length<1)throw new e.Error("slice filter expects at least 1 argument");var n=r[0]||0,o=r.length>1?r[1]:t.length,s=n>=0?n:Math.max(t.length+n,0);if(e.lib.is("Array",t)){for(var i=[],a=s;s+o>a&&a<t.length;a++)i.push(t[a]);return i}if(e.lib.is("String",t))return t.substr(s,o);throw new e.Error("slice filter expects value to be an array or string")}},abs:function(e){return void 0!==e&&null!==e?Math.abs(e):void 0},first:function(e){if(e instanceof Array)return e[0];if(e instanceof Object){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(t,r){if(void 0!==t&&null!==t){if(void 0===r||r.length<1||r.length>2)throw new e.Error("split filter expects 1 or 2 argument");if(e.lib.is("String",t)){var n=r[0],o=r[1],s=t.split(n);if(void 0===o)return s;if(0>o)return t.split(n,s.length+o);var i=[];if(""==n)for(;s.length>0;){for(var a="",p=0;o>p&&s.length>0;p++)a+=s.shift();i.push(a)}else{for(var p=0;o-1>p&&s.length>0;p++)i.push(s.shift());s.length>0&&i.push(s.join(n))}return i}throw new e.Error("split filter expects value to be a string")}},last:function(t){if(e.lib.is("Object",t)){var r;return r=void 0===t._keys?Object.keys(t):t._keys,t[r[r.length-1]]}return t[t.length-1]},raw:function(e){return e},batch:function(t,r){var n,o,s,i=r.shift(),a=r.shift();if(!e.lib.is("Array",t))throw new e.Error("batch filter expects items to be an array");if(!e.lib.is("Number",i))throw new e.Error("batch filter expects size to be a number");if(i=Math.ceil(i),n=e.lib.chunkArray(t,i),a&&0!=t.length%i){for(o=n.pop(),s=i-o.length;s--;)o.push(a);n.push(o)}return n},round:function(t,r){r=r||[];var n=r.length>0?r[0]:0,o=r.length>1?r[1]:"common";if(t=parseFloat(t),n&&!e.lib.is("Number",n))throw new e.Error("round filter expects precision to be a number");if("common"===o)return e.lib.round(t,n);if(!e.lib.is("Function",Math[o]))throw new e.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[o](t*Math.pow(10,n))/Math.pow(10,n)}},e.filter=function(t,r,n){if(!e.filters[t])throw"Unable to find filter "+t;return e.filters[t].apply(this,[r,n])},e.filter.extend=function(t,r){e.filters[t]=r},e}(Twig||{}),Twig=function(e){return e.functions={range:function(e,t,r){var n,o,s,i=[],a=r||1,p=!1;if(isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(p=!0,n=e.charCodeAt(0),o=t.charCodeAt(0)):(n=isNaN(e)?0:e,o=isNaN(t)?0:t):(n=parseInt(e,10),o=parseInt(t,10)),s=n>o?!1:!0)for(;o>=n;)i.push(p?String.fromCharCode(n):n),n+=a;else for(;n>=o;)i.push(p?String.fromCharCode(n):n),n-=a;return i},cycle:function(e,t){var r=t%e.length;return e[r]},dump:function(){var t="\n",r="  ",n=0,o="",s=Array.prototype.slice.call(arguments),i=function(e){for(var t="";e>0;)e--,t+=r;return t},a=function(e){o+=i(n),"object"==typeof e?p(e):"function"==typeof e?o+="function()"+t:"string"==typeof e?o+="string("+e.length+') "'+e+'"'+t:"number"==typeof e?o+="number("+e+")"+t:"boolean"==typeof e&&(o+="bool("+e+")"+t)},p=function(e){var r;if(null===e)o+="NULL"+t;else if(void 0===e)o+="undefined"+t;else if("object"==typeof e){o+=i(n)+typeof e,n++,o+="("+function(e){var t,r=0;for(t in e)e.hasOwnProperty(t)&&r++;return r}(e)+") {"+t;for(r in e)o+=i(n)+"["+r+"]=> "+t,a(e[r]);n--,o+=i(n)+"}"+t}else a(e)};return 0==s.length&&s.push(this.context),e.forEach(s,function(e){p(e)}),o},date:function(t){var r;if(void 0===t)r=new Date;else if(e.lib.is("Date",t))r=t;else if(e.lib.is("String",t))r=new Date(1e3*e.lib.strtotime(t));else{if(!e.lib.is("Number",t))throw new e.Error("Unable to parse date "+t);r=new Date(1e3*t)}return r},block:function(e){return this.blocks[e]},parent:function(){return e.placeholders.parent},attribute:function(e,t,r){return e instanceof Object&&e.hasOwnProperty(t)?"function"==typeof e[t]?e[t].apply(void 0,r):e[t]:e[t]||void 0},template_from_string:function(t){return void 0===t&&(t=""),new e.Template({data:t})}},e._function=function(t,r,n){if(!e.functions[t])throw"Unable to find function "+t;return e.functions[t](r,n)},e._function.extend=function(t,r){e.functions[t]=r},e}(Twig||{}),Twig=function(e){return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){"use strict";var r=t.id,n={strict_variables:t.strict_variables||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1};if(r&&e.validateId(r),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return new e.Template({data:t.data,module:t.module,id:r,options:n});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error("Both ref and id cannot be set on a twig.js template.");return e.Templates.load(t.ref)}return void 0!==t.href?e.Templates.loadRemote(t.href,{id:r,method:"ajax",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error):void 0!==t.path?e.Templates.loadRemote(t.path,{id:r,method:"fs",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:n},t.load,t.error):void 0},e.exports.extendFilter=function(t,r){e.filter.extend(t,r)},e.exports.extendFunction=function(t,r){e._function.extend(t,r)},e.exports.extendTest=function(t,r){e.test.extend(t,r)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,r){var n,o=r.filename,s=r.filename;return n=new e.Template({data:t,path:s,id:o,options:r.settings["twig options"]}),function(e){return n.render(e)}},e.exports.renderFile=function(t,r,n){"function"==typeof r&&(n=r,r={}),r=r||{};var o={path:t,base:r.settings.views,load:function(e){n(null,e.render(r))}},s=r.settings["twig options"];if(s)for(var i in s)s.hasOwnProperty(i)&&(o[i]=s[i]);e.exports.twig(o)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e}(Twig||{});"undefined"!=typeof module&&module.declare?module.declare([],function(e,t){for(key in Twig.exports)Twig.exports.hasOwnProperty(key)&&(t[key]=Twig.exports[key])}):"function"==typeof define&&define.amd?define(function(){return Twig.exports}):"undefined"!=typeof module&&module.exports?module.exports=Twig.exports:(window.twig=Twig.exports.twig,window.Twig=Twig.exports);